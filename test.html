<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
    <title>Gerenciador de Tarefas</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abas Editáveis Persistentes</title>
</head>

<body>

    <!-- NOTAS -->
    <!-- melhore a nomeação de id e classes, algumas são inconsisas-->

    <header>
        <h1>Gerenciador de Tarefas</h1>
    </header>

    <!-- crie um nav assim não precisa de style {display: inline-block;} -->
    <!-- aqui fica os texto das abas  -->
    <div class="tablinks active" onclick="abrirAba(event, 'Aba1')">home </div>
    <div class="tablinks" onclick="abrirAba(event, 'Aba2')">criar novo</div>
    <div class="tablinks" onclick="abrirAba(event, 'Aba3')">eventos</div>
    <div class="tablinks" onclick="abrirAba(event, 'Aba4')">configurações</div>
    <div class="tablinks" onclick="abrirAba(event, 'Aba5')">perfil</div>

    <!-- aqui voce conseguir modifica as abas tanto adiciona e editar  -->


    <main>
        <div id="Aba1" class="tab active">
            <h2>Seja bem vindo ao Gerenciador de tarefas </h2>
        </div>
        <div id="Aba2" class="tab">
            <div id="create-task">
                <h4>Criar tarefa.</h4>
                <div class="message">
                    <textarea type="text" name="content-item" id="content"></textarea>
                    <div class="inputs">
                        <button id="add-item">adicionar</button>
                        <button id="cancel-item">cancelar</button>
                    </div>
                </div>
            </div>

            <!-- Faz os botões que tão no script ficarem
              aqui pra eu poder manipular eles no css (heitor) -->
            <div id="on-going">
                <h4>Em progresso.</h4>
                <div id="task-ongoing"></div>
            </div>


        </div>
        <div id="Aba3" class="tab">
            <h2>Conteúdo da Aba 3</h2>
            <textarea id="conteudoAba3" class="content-area" placeholder="Escreva algo..."></textarea>
        </div>
        <div id="Aba4" class="tab">
            <h2>Conteúdo da Aba 4</h2>
            <textarea id="conteudoAba4" class="content-area" placeholder="Escreva algo..."></textarea>
        </div>
        <div id="Aba5" class="tab">
            <h2>Conteúdo da Aba 5</h2>
            <textarea id="conteudoAba5" class="content-area" placeholder="Escreva algo..."></textarea>
        </div>
        <div id="Aba6" class="tab">
            <h2>Conteúdo da Aba 6</h2>
            <textarea id="conteudoAba6" class="content-area" placeholder="Escreva algo..."></textarea>
        </div>
    </main>

    <footer>
        <h6>© todos os direitos reservados aos criadores.</h6>
    </footer>
    <script>

        const contentInput = document.getElementById('content');
        const taskOngoingDiv = document.getElementById('task-ongoing');

        function loadTasks() {
            const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            tasks.forEach(createTaskElement);
        }

        function createTaskElement({ content, completed = false }) {
            const taskDiv = document.createElement('div');
            taskDiv.textContent = content;
            if (completed) taskDiv.style.textDecoration = 'line-through';

            ['Concluir', 'Remover'].forEach(text => {
                const button = document.createElement('button');
                button.textContent = text;
                button.onclick = text === 'Concluir' ? () => {
                    taskDiv.style.textDecoration = 'line-through';
                    updateTask(content, true);
                    button.disabled = true;
                } : () => {
                    taskOngoingDiv.removeChild(taskDiv);
                    removeTask(content);
                };
                taskDiv.appendChild(button);
            });

            taskOngoingDiv.appendChild(taskDiv);
        }

        function updateTask(content, completed) {
            const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            const index = tasks.findIndex(task => task.content === content);
            if (index !== -1) tasks[index].completed = completed;
            else tasks.push({ content, completed });
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function removeTask(content) {
            const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            localStorage.setItem('tasks', JSON.stringify(tasks.filter(task => task.content !== content)));
        }

        document.getElementById('add-item').onclick = () => {
            const taskContent = contentInput.value.trim();
            if (taskContent) {
                createTaskElement({ content: taskContent });
                updateTask(taskContent, false);
                contentInput.value = '';
            } else alert('Por favor, insira uma tarefa!');
        };

        document.getElementById('cancel-item').onclick = () => contentInput.value = '';

        loadTasks();

        //  aqui armazena o conteúdo das abas temporariamente
        var conteudos = {
            'Aba1': '',
            'Aba2': '',
            'Aba3': '',
            'Aba4': '',
            'Aba5': '',
            'Aba6': ''
        };

        function abrirAba(evt, nomeAba) {
            var i, tab, tablinks;

            // aqui no caso Salva o conteúdo da aba atual antes de mudar para outra
            var abaAtual = document.querySelector(".tab.active");
            if (abaAtual) {
                var textareaAtual = abaAtual.querySelector("textarea");
                if (textareaAtual) {
                    conteudos[abaAtual.id] = textareaAtual.value; // aqui Salva o conteúdo digitado
                }
            }

            // aqui Esconde todas as abas
            tab = document.getElementsByClassName("tab");
            for (i = 0; i < tab.length; i++) {
                tab[i].classList.remove("active");
            }

            // aqui Remove a classe "active" de todas as abas
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active");
            }

            // aqui Mostra a aba selecionada e define como ativa
            document.getElementById(nomeAba).classList.add("active");
            evt.currentTarget.classList.add("active");

            // aqui Restaura o conteúdo salvo da aba selecionada
            var textarea = document.getElementById("conteudo" + nomeAba);
            textarea.value = conteudos[nomeAba];
        }
    </script>
</body>

</html>